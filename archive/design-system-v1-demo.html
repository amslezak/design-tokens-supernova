<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NYU Langone Health Design System v1.0 - Complete Demo</title>
    
    <!-- NYU Langone Health Design System v1.0 -->
    <!-- Consolidated CSS for maximum compatibility -->
    <link rel="stylesheet" href="css/consolidated-styles.css">
    
    <!-- Legacy design token CSS files for compatibility -->
    <link rel="stylesheet" href="build/tokens-light.css">
    <link rel="stylesheet" href="build/tokens-dark.css">
    <link rel="stylesheet" href="build/tokens-desktop.css">
    <link rel="stylesheet" href="build/tokens-tablet.css">
    <link rel="stylesheet" href="build/tokens-mobile.css">
</head>
<body>
    <!-- Scroll sentinel for hide/show detection -->
    <div class="scroll-sentinel"></div>
    
    <nav class="nav">
        <!-- Skip link for accessibility -->
        <a href="#main-content" class="nav-skip">Skip to main content</a>
        
        <!-- Overlay for mobile menu -->
        <div class="nav-overlay"></div>
        
        <div class="nav-container">
            <!-- Brand -->
            <a href="#" class="nav-brand">
                <div class="nav-logo">üè•</div>
                <span>NYU Langone Health</span>
            </a>
            
            <!-- Navigation Menu -->
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#typography" class="nav-link">Typography</a>
                </li>
                <li class="nav-item">
                    <a href="#colors" class="nav-link">Colors</a>
                </li>
                <li class="nav-item">
                    <a href="#components" class="nav-link is-active">Components</a>
                </li>
                <li class="nav-item">
                    <a href="#healthcare" class="nav-link">Healthcare</a>
                </li>
                <li class="nav-item">
                    <a href="#accessibility" class="nav-link">Accessibility</a>
                </li>
            </ul>
            
            <!-- Navigation Actions -->
            <div class="nav-actions">
                <button class="btn btn-secondary btn-sm">Documentation</button>
                <button class="theme-toggle btn btn-ghost btn-sm" onclick="toggleTheme()" aria-label="Toggle dark mode">
                    üåô Dark Mode
                </button>
            </div>
            
            <!-- Mobile Menu Toggle -->
            <button class="nav-toggle" id="nav-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
                <div class="nav-toggle-icon">
                    <span></span>
                </div>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Hero Section -->
        <section class="section">
            <div class="container">
                <h1 class="hero-title">Design System v1.0</h1>
                <p class="subtitle">Complete healthcare-centered design token demonstration</p>
            </div>
        </section>

    <!-- Typography Section -->
    <section id="typography" class="section">
        <div class="container">
            <h2 class="section-title">Typography Scale</h2>
            <div class="grid grid-2">
                <div class="card">
                    <h3 class="card-title">Font Hierarchy</h3>
                    <div class="typography-sample">
                        <h1 class="font-scale-5xl">Hero Title (48px)</h1>
                        <h2 class="font-scale-4xl">Page Title (36px)</h2>
                        <h3 class="font-scale-3xl">Section Title (30px)</h3>
                        <h4 class="font-scale-2xl">Subsection (24px)</h4>
                        <h5 class="font-scale-xl">Heading (20px)</h5>
                        <h6 class="font-scale-lg">Subheading (18px)</h6>
                        <p class="font-scale-base">Body text (16px) - The standard text size for optimal readability in healthcare interfaces.</p>
                        <p class="font-scale-sm">Small text (14px) - For secondary information and metadata.</p>
                        <p class="font-scale-xs">Extra small (12px) - For legal text and disclaimers only.</p>
                    </div>
                </div>
                <div class="card">
                    <h3 class="card-title">Font Families</h3>
                    <div class="typography-sample">
                        <p style="font-family: var(--font-family-primary);">
                            <strong>Primary Font (Benton Sans)</strong><br>
                            Used for all interface text, ensuring excellent screen readability and professional healthcare appearance.
                        </p>
                        <p style="font-family: var(--font-family-secondary);">
                            <strong>Secondary Font (Source Serif Pro)</strong><br>
                            For editorial content and longer reading experiences where serif fonts improve comprehension.
                        </p>
                        <div class="code-sample">
                            <strong>Monospace Font (Source Code Pro)</strong><br>
                            For medical codes, patient IDs, and technical data: MRN-123456789
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Color System Section -->
    <section id="colors" class="section">
        <div class="container">
            <h2 class="section-title">Color System</h2>
            
            <h3 class="mb-6">Brand Colors</h3>
            <div class="color-grid">
                <div class="color-swatch">
                    <div class="color-preview" style="background-color: var(--color-purple-500);"></div>
                    <div class="color-info">
                        <div class="color-name">NYU Purple Primary</div>
                        <div class="color-value">#5E2E84</div>
                    </div>
                </div>
                <div class="color-swatch">
                    <div class="color-preview" style="background-color: var(--color-blue-500);"></div>
                    <div class="color-info">
                        <div class="color-name">Healthcare Blue</div>
                        <div class="color-value">#00A1DF</div>
                    </div>
                </div>
                <div class="color-swatch">
                    <div class="color-preview" style="background-color: var(--color-purple-100);"></div>
                    <div class="color-info">
                        <div class="color-name">Purple Light</div>
                        <div class="color-value">#E1BEE7</div>
                    </div>
                </div>
                <div class="color-swatch">
                    <div class="color-preview" style="background-color: var(--color-blue-100);"></div>
                    <div class="color-info">
                        <div class="color-name">Blue Light</div>
                        <div class="color-value">#BBDEFB</div>
                    </div>
                </div>
            </div>

            <h3 class="mb-6">Healthcare-Specific Colors</h3>
            <div class="color-grid">
                <div class="color-swatch">
                    <div class="color-preview" style="background-color: var(--color-status-stable);"></div>
                    <div class="color-info">
                        <div class="color-name">Status Stable</div>
                        <div class="color-value">#2E7D32</div>
                    </div>
                </div>
                <div class="color-swatch">
                    <div class="color-preview" style="background-color: var(--color-status-caution);"></div>
                    <div class="color-info">
                        <div class="color-name">Status Caution</div>
                        <div class="color-value">#F57C00</div>
                    </div>
                </div>
                <div class="color-swatch">
                    <div class="color-preview" style="background-color: var(--color-status-critical);"></div>
                    <div class="color-info">
                        <div class="color-name">Status Critical</div>
                        <div class="color-value">#D32F2F</div>
                    </div>
                </div>
                <div class="color-swatch">
                    <div class="color-preview" style="background-color: var(--color-data-medication);"></div>
                    <div class="color-info">
                        <div class="color-name">Medication Data</div>
                        <div class="color-value">#1976D2</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Components Section -->
    <section id="components" class="section">
        <div class="container">
            <h2 class="section-title">Interactive Components</h2>
            
            <div class="grid grid-2">
                <div class="card">
                    <h3 class="card-title">Button Variants</h3>
                    <div>
                        <button class="btn btn-primary">Primary Action</button>
                        <button class="btn btn-secondary">Secondary</button>
                        <button class="btn btn-success">Success</button>
                        <button class="btn btn-warning">Warning</button>
                        <button class="btn btn-danger">Danger</button>
                    </div>
                    <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-top: var(--space-4);">
                        All buttons meet WCAG 2.1 AA standards with minimum 44px touch targets and proper focus indicators.
                    </p>
                </div>
                
                <div class="card">
                    <h3 class="card-title">Form Elements</h3>
                    <div class="form-group">
                        <label class="form-label" for="patient-name">Patient Name</label>
                        <input class="form-input" type="text" id="patient-name" placeholder="Enter patient name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="medical-record">Medical Record Number</label>
                        <input class="form-input" type="text" id="medical-record" placeholder="MRN-000000000" pattern="MRN-[0-9]{9}">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="notes">Clinical Notes</label>
                        <textarea class="form-input" id="notes" rows="3" placeholder="Enter clinical observations..."></textarea>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Healthcare Components Section -->
    <section id="healthcare" class="section">
        <div class="container">
            <h2 class="section-title">Healthcare-Specific Components</h2>
            
            <h3 class="mb-6">Clinical Alerts</h3>
            <div class="clinical-alert alert-critical">
                <div class="alert-icon">‚ö†Ô∏è</div>
                <div>
                    <strong>Critical Alert:</strong> Patient vitals require immediate attention. Blood pressure 180/120, Heart rate 45 BPM.
                </div>
            </div>
            
            <div class="clinical-alert alert-warning">
                <div class="alert-icon">‚ö°</div>
                <div>
                    <strong>Warning:</strong> Medication interaction detected between Warfarin and Aspirin. Consult pharmacy.
                </div>
            </div>
            
            <div class="clinical-alert alert-stable">
                <div class="alert-icon">‚úÖ</div>
                <div>
                    <strong>Stable:</strong> Patient condition is stable. All vitals within normal ranges.
                </div>
            </div>

            <h3 class="mb-6">Patient Cards</h3>
            <div class="grid grid-2">
                <div class="patient-card">
                    <div class="patient-avatar">JD</div>
                    <div class="patient-info">
                        <h3>Jane Doe</h3>
                        <div class="patient-meta">
                            <span class="status-indicator status-stable"></span>
                            MRN: 123456789 ‚Ä¢ Room 302A
                        </div>
                        <div style="margin-top: var(--space-2);">
                            <span class="badge badge-vitals">Vitals</span>
                            <span class="badge badge-medication">Medication</span>
                            <span class="badge badge-labs">Labs Pending</span>
                        </div>
                    </div>
                    <div>
                        <button class="btn btn-primary" style="margin: 0;">View Chart</button>
                    </div>
                </div>
                
                <div class="patient-card">
                    <div class="patient-avatar">RS</div>
                    <div class="patient-info">
                        <h3>Robert Smith</h3>
                        <div class="patient-meta">
                            <span class="status-indicator status-caution"></span>
                            MRN: 987654321 ‚Ä¢ Room 415B
                        </div>
                        <div style="margin-top: var(--space-2);">
                            <span class="badge badge-vitals">Vitals</span>
                            <span class="badge badge-labs">Lab Results</span>
                        </div>
                    </div>
                    <div>
                        <button class="btn btn-warning" style="margin: 0;">Needs Attention</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modern CSS Features Section -->
    <section class="section">
        <div class="container">
            <h2 class="section-title">Modern CSS Features</h2>
            
            <h3 class="mb-6">Container Queries</h3>
            <p class="mb-6" style="color: var(--color-text-secondary);">
                Resize your browser window to see how these components adapt based on their container size, not just viewport size.
            </p>
            
            <div class="grid grid-3">
                <div class="responsive-component">
                    <div class="responsive-content">
                        <div>
                            <h4>Medication List</h4>
                            <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">
                                This component adapts to its container width
                            </p>
                        </div>
                        <div>
                            <button class="btn btn-primary">Add</button>
                            <button class="btn btn-secondary">Edit</button>
                        </div>
                    </div>
                </div>
                
                <div class="responsive-component">
                    <div class="responsive-content">
                        <div>
                            <h4>Vitals Monitor</h4>
                            <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">
                                Layout changes based on available space
                            </p>
                        </div>
                        <div>
                            <button class="btn btn-success">Record</button>
                            <button class="btn btn-secondary">History</button>
                        </div>
                    </div>
                </div>
                
                <div class="responsive-component">
                    <div class="responsive-content">
                        <div>
                            <h4>Lab Results</h4>
                            <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">
                                Responds to container, not viewport
                            </p>
                        </div>
                        <div>
                            <button class="btn btn-primary">View</button>
                            <button class="btn btn-secondary">Share</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Accessibility Features Section -->
    <section id="accessibility" class="section">
        <div class="container">
            <h2 class="section-title">Accessibility Features</h2>
            
            <div class="grid grid-2">
                <div class="card">
                    <h3 class="card-title">WCAG 2.1 AA Compliance</h3>
                    <ul style="margin-left: var(--space-6); line-height: var(--line-height-relaxed);">
                        <li><strong>Color Contrast:</strong> 4.5:1 minimum for normal text, 3:1 for large text</li>
                        <li><strong>Touch Targets:</strong> Minimum 44px √ó 44px for all interactive elements</li>
                        <li><strong>Focus Indicators:</strong> High contrast focus rings with 3px width</li>
                        <li><strong>Typography:</strong> Minimum 16px for body text, scalable fonts</li>
                        <li><strong>Motion:</strong> Respects prefers-reduced-motion preferences</li>
                        <li><strong>Screen Readers:</strong> Semantic HTML and proper ARIA labels</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h3 class="card-title">Focus Management Demo</h3>
                    <p class="mb-4">Use Tab key to navigate through these elements and observe the focus indicators:</p>
                    <button class="btn btn-primary">Accessible Button 1</button>
                    <button class="btn btn-secondary">Accessible Button 2</button>
                    <div class="form-group">
                        <label class="form-label" for="accessible-input">Accessible Input</label>
                        <input class="form-input" type="text" id="accessible-input" placeholder="Tab to focus me">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Spacing & Layout Section -->
    <section class="section">
        <div class="container">
            <h2 class="section-title">Spacing & Layout System</h2>
            
            <div class="card">
                <h3 class="card-title">8px Grid System</h3>
                <p class="mb-6" style="color: var(--color-text-secondary);">
                    All spacing follows an 8px base unit for consistent visual rhythm and easier development.
                </p>
                
                <div style="display: flex; flex-wrap: wrap; gap: var(--space-4); align-items: center;">
                    <div style="display: flex; align-items: center; gap: var(--space-2);">
                        <div style="width: var(--space-1); height: var(--space-1); background: var(--color-purple-500);"></div>
                        <span style="font-size: var(--font-size-sm);">4px (space-1)</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: var(--space-2);">
                        <div style="width: var(--space-2); height: var(--space-2); background: var(--color-purple-500);"></div>
                        <span style="font-size: var(--font-size-sm);">8px (space-2)</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: var(--space-2);">
                        <div style="width: var(--space-4); height: var(--space-4); background: var(--color-purple-500);"></div>
                        <span style="font-size: var(--font-size-sm);">16px (space-4)</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: var(--space-2);">
                        <div style="width: var(--space-6); height: var(--space-6); background: var(--color-purple-500);"></div>
                        <span style="font-size: var(--font-size-sm);">24px (space-6)</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: var(--space-2);">
                        <div style="width: var(--space-8); height: var(--space-8); background: var(--color-purple-500);"></div>
                        <span style="font-size: var(--font-size-sm);">32px (space-8)</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Theme toggle functionality
        function toggleTheme() {
            const html = document.documentElement;
            const button = document.querySelector('.theme-toggle');
            const currentTheme = html.getAttribute('data-theme');
            
            if (currentTheme === 'dark') {
                html.removeAttribute('data-theme');
                button.textContent = 'üåô Dark Mode';
                localStorage.setItem('theme', 'light');
            } else {
                html.setAttribute('data-theme', 'dark');
                button.textContent = '‚òÄÔ∏è Light Mode';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Initialize theme from localStorage
        function initializeTheme() {
            const savedTheme = localStorage.getItem('theme');
            const button = document.querySelector('.theme-toggle');
            
            if (savedTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                button.textContent = '‚òÄÔ∏è Light Mode';
            } else {
                document.documentElement.removeAttribute('data-theme');
                button.textContent = 'üåô Dark Mode';
            }
        }

        // Accessibility: Enhanced keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Tab') {
                // Ensure focus is visible
                document.body.classList.add('keyboard-navigation');
            }
        });

        document.addEventListener('mousedown', function() {
            document.body.classList.remove('keyboard-navigation');
        });

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Simulate patient data updates (for demo purposes)
        function simulateDataUpdate() {
            const statusIndicators = document.querySelectorAll('.status-indicator');
            const statuses = ['status-stable', 'status-caution', 'status-critical'];
            
            statusIndicators.forEach(indicator => {
                // Randomly change status every 10 seconds (for demo)
                if (Math.random() > 0.8) {
                    const currentStatus = Array.from(indicator.classList).find(cls => cls.startsWith('status-'));
                    if (currentStatus) {
                        indicator.classList.remove(currentStatus);
                    }
                    const newStatus = statuses[Math.floor(Math.random() * statuses.length)];
                    indicator.classList.add(newStatus);
                }
            });
        }

        // Feature Detection
        function checkBrowserSupport() {
            const features = {
                intersectionObserver: 'IntersectionObserver' in window,
                containerQueries: CSS.supports('container-type: inline-size'),
                backdropFilter: CSS.supports('backdrop-filter: blur(10px)'),
                hasSelector: CSS.supports('selector(:has(*))')
            };
            
            console.log('Browser feature support:', features);
            
            // Add fallback class for older browsers
            if (!features.backdropFilter) {
                document.documentElement.classList.add('no-backdrop-filter');
            }
            
            return features;
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Check browser capabilities
            const browserSupport = checkBrowserSupport();
            
            initializeTheme();
            
            // Set up periodic data simulation
            setInterval(simulateDataUpdate, 10000);
            
            // Announce theme changes to screen readers
            const themeButton = document.querySelector('.theme-toggle');
            if (themeButton) {
                themeButton.addEventListener('click', function() {
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const announcement = currentTheme === 'dark' ? 'Dark mode activated' : 'Light mode activated';
                    
                    // Create a temporary announcement for screen readers
                    const announcement_el = document.createElement('div');
                    announcement_el.setAttribute('aria-live', 'polite');
                    announcement_el.setAttribute('aria-atomic', 'true');
                    announcement_el.classList.add('sr-only');
                    announcement_el.textContent = announcement;
                    document.body.appendChild(announcement_el);
                    
                    setTimeout(() => {
                        if (document.body.contains(announcement_el)) {
                            document.body.removeChild(announcement_el);
                        }
                    }, 1000);
                });
            }
            
            // Initialize modern navigation
            initializeScrollNavigation();
            initializeMobileNavigation();
            
            // Add success indicator
            console.log('‚úÖ NYU Langone Health Design System v1.0 initialized successfully');
        });

        // Modern Navigation Hide/Show with Intersection Observer (Baseline API)
        function initializeScrollNavigation() {
            const sentinel = document.querySelector('.scroll-sentinel');
            
            if (!sentinel || !('IntersectionObserver' in window)) {
                // Fallback for browsers without Intersection Observer
                return;
            }

            const observer = new IntersectionObserver(
                (entries) => {
                    const isScrolled = !entries[0].isIntersecting;
                    document.documentElement.classList.toggle('scrolled', isScrolled);
                },
                {
                    rootMargin: '0px',
                    threshold: 0
                }
            );

            observer.observe(sentinel);
        }

        // JavaScript-based mobile navigation
        function initializeMobileNavigation() {
            const toggle = document.getElementById('nav-toggle');
            const menu = document.querySelector('.nav-menu');
            const overlay = document.querySelector('.nav-overlay');
            const navLinks = document.querySelectorAll('.nav-link');
            
            if (!toggle || !menu) return;
            
            let isOpen = false;
            
            function openMenu() {
                isOpen = true;
                menu.classList.add('is-open');
                if (overlay) overlay.classList.add('is-open');
                toggle.setAttribute('aria-expanded', 'true');
                
                // Add hamburger animation
                toggle.classList.add('is-open');
                
                
                // Focus first menu item for accessibility
                const firstLink = menu.querySelector('.nav-link');
                if (firstLink) {
                    setTimeout(() => firstLink.focus(), 100);
                }
            }
            
            function closeMenu() {
                isOpen = false;
                menu.classList.remove('is-open');
                if (overlay) overlay.classList.remove('is-open');
                toggle.setAttribute('aria-expanded', 'false');
                
                // Remove hamburger animation
                toggle.classList.remove('is-open');
            }
            
            function toggleMenu() {
                if (isOpen) {
                    closeMenu();
                } else {
                    openMenu();
                }
            }
            
            // Toggle menu on button click
            toggle.addEventListener('click', toggleMenu);
            
            // Close menu when clicking overlay
            if (overlay) {
                overlay.addEventListener('click', closeMenu);
            }
            
            // Close menu when clicking nav links
            navLinks.forEach(link => {
                link.addEventListener('click', closeMenu);
            });
            
            // Close menu on escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && isOpen) {
                    closeMenu();
                    toggle.focus();
                }
            });
            
            // Focus trapping for accessibility
            document.addEventListener('keydown', (e) => {
                if (!isOpen || e.key !== 'Tab') return;
                
                const focusableElements = menu.querySelectorAll('.nav-link');
                const firstElement = focusableElements[0];
                const lastElement = focusableElements[focusableElements.length - 1];
                
                if (e.shiftKey) {
                    if (document.activeElement === firstElement) {
                        e.preventDefault();
                        toggle.focus();
                    }
                } else {
                    if (document.activeElement === toggle) {
                        e.preventDefault();
                        firstElement.focus();
                    } else if (document.activeElement === lastElement) {
                        e.preventDefault();
                        toggle.focus();
                    }
                }
            });
            
            // Close menu on window resize (if desktop)
            window.addEventListener('resize', () => {
                if (window.innerWidth > 768 && isOpen) {
                    closeMenu();
                }
            });
        }

        // Enhanced form validation with accessibility
        document.querySelectorAll('.form-input').forEach(input => {
            input.addEventListener('blur', function() {
                if (this.hasAttribute('required') && !this.value.trim()) {
                    this.setAttribute('aria-invalid', 'true');
                    this.style.borderColor = 'var(--color-red-500)';
                } else if (this.hasAttribute('pattern') && this.value && !new RegExp(this.getAttribute('pattern')).test(this.value)) {
                    this.setAttribute('aria-invalid', 'true');
                    this.style.borderColor = 'var(--color-red-500)';
                } else {
                    this.setAttribute('aria-invalid', 'false');
                    this.style.borderColor = '';
                }
            });
            
            input.addEventListener('input', function() {
                if (this.getAttribute('aria-invalid') === 'true') {
                    this.setAttribute('aria-invalid', 'false');
                    this.style.borderColor = '';
                }
            });
        });
    </script>
</body>
</html>